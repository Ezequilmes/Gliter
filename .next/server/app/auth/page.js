(()=>{var e={};e.id=235,e.ids=[235],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},68342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(54339),s(65116),s(35866);var r=s(23191),i=s(88716),a=s(37922),o=s.n(a),l=s(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(t,n);let c=["",{children:["auth",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,54339)),"C:\\Users\\Admin\\Documents\\app\\src\\app\\auth\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,65116)),"C:\\Users\\Admin\\Documents\\app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Admin\\Documents\\app\\src\\app\\auth\\page.tsx"],u="/auth/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/auth/page",pathname:"/auth",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},53551:(e,t,s)=>{Promise.resolve().then(s.bind(s,6076))},77636:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},94019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(76557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6076:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(10326),i=s(17577),a=s(35047),o=s(90445),l=s(46791),n=s(76),c=s(11552),d=s(77636),u=s(94019);let m=(0,s(76557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),p=()=>{let[e,t]=(0,i.useState)(null),[s,r]=(0,i.useState)(!1),[a,o]=(0,i.useState)(null),l=()=>{if(r(!0),o(null),!navigator.geolocation){o("Geolocalizaci\xf3n no soportada por este navegador"),r(!1);return}navigator.geolocation.getCurrentPosition(e=>{let{latitude:s,longitude:i}=e.coords;t({lat:s,lng:i}),r(!1)},e=>{o("Error obteniendo ubicaci\xf3n: "+e.message),r(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})};return(0,i.useEffect)(()=>{l()},[]),{location:e,loading:s,error:a,refetch:l}};var x=s(46226);let h=({isLogin:e,loading:t,onLogin:s,onRegister:a})=>{let[o,l]=(0,i.useState)({nombre:"",edad:18,genero:"",email:"",password:"",rolSexual:void 0,fotoPerfil:null,fotosAdicionales:[],ubicacion:void 0}),[n,c]=(0,i.useState)({email:"",password:""}),[h,f]=(0,i.useState)([]),[b,g]=(0,i.useState)(!1),{location:j,loading:y,error:v}=p(),N=(0,i.useRef)(null),w=(0,i.useRef)(null),q=t=>{let{name:s,value:r,type:i}=t.target,a="number"===i?parseInt(r):r;e?c(e=>({...e,[s]:a})):l(e=>({...e,[s]:a}))},k=e=>{if(0===e)l(e=>({...e,fotoPerfil:null}));else{let t=[...o.fotosAdicionales];t.splice(e-1,1),l(e=>({...e,fotosAdicionales:t}))}let t=[...h];t.splice(e,1),f(t)},P=t=>{if(t.preventDefault(),e)s(n.email,n.password);else{if(!o.fotoPerfil){alert("La foto de perfil es obligatoria");return}a(o)}};return e?(0,r.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email-login",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",id:"email-login",name:"email",value:n.email,onChange:q,className:"input-field",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"password-login",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),r.jsx("input",{type:"password",id:"password-login",name:"password",value:n.password,onChange:q,className:"input-field",required:!0})]}),r.jsx("button",{type:"submit",disabled:t,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]}):(0,r.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),r.jsx("input",{type:"text",id:"nombre",name:"nombre",value:o.nombre,onChange:q,className:"input-field",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"edad",className:"block text-sm font-medium text-gray-700 mb-1",children:"Edad"}),r.jsx("input",{type:"number",id:"edad",name:"edad",value:o.edad,onChange:q,min:"18",max:"100",className:"input-field",required:!0})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"genero",className:"block text-sm font-medium text-gray-700 mb-1",children:"G\xe9nero"}),(0,r.jsxs)("select",{id:"genero",name:"genero",value:o.genero,onChange:q,className:"input-field",required:!0,children:[r.jsx("option",{value:"",children:"Selecciona tu g\xe9nero"}),r.jsx("option",{value:"Hombre",children:"Hombre"}),r.jsx("option",{value:"Mujer",children:"Mujer"}),r.jsx("option",{value:"No binario",children:"No binario"}),r.jsx("option",{value:"Otro",children:"Otro"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"rolSexual",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol Sexual (Opcional)"}),(0,r.jsxs)("select",{id:"rolSexual",name:"rolSexual",value:o.rolSexual||"",onChange:q,className:"input-field",children:[r.jsx("option",{value:"",children:"No especificar"}),r.jsx("option",{value:"activo",children:"Activo"}),r.jsx("option",{value:"pasivo",children:"Pasivo"}),r.jsx("option",{value:"vers\xe1til",children:"Vers\xe1til"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email-register",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),r.jsx("input",{type:"email",id:"email-register",name:"email",value:o.email,onChange:q,className:"input-field",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"password-register",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),r.jsx("input",{type:"password",id:"password-register",name:"password",value:o.password,onChange:q,className:"input-field",required:!0})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"useLocation",checked:b,onChange:()=>{g(!b),!b&&j?l(e=>({...e,ubicacion:j})):l(e=>({...e,ubicacion:void 0}))},className:"form-checkbox h-4 w-4 text-primary-600 transition duration-150 ease-in-out"}),r.jsx("label",{htmlFor:"useLocation",className:"text-sm font-medium text-gray-700",children:"Usar mi ubicaci\xf3n actual"})]}),b&&y&&(0,r.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[r.jsx(d.Z,{className:"w-4 h-4 mr-1"})," Obteniendo ubicaci\xf3n..."]}),b&&v&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center",children:[r.jsx(u.Z,{className:"w-4 h-4 mr-1"})," Error al obtener ubicaci\xf3n: ",v]}),b&&j&&(0,r.jsxs)("p",{className:"text-sm text-green-600 flex items-center",children:[r.jsx(d.Z,{className:"w-4 h-4 mr-1"})," Ubicaci\xf3n obtenida: ",j.lat.toFixed(2),", ",j.lng.toFixed(2)]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"profile-photo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Foto de Perfil (Obligatoria)"}),r.jsx("input",{type:"file",id:"profile-photo",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){l(e=>({...e,fotoPerfil:t}));let e=new FileReader;e.onload=e=>{let t=e.target?.result;f(e=>[t,...e.slice(1)])},e.readAsDataURL(t)}},ref:N,className:"hidden"}),(0,r.jsxs)("button",{type:"button",onClick:()=>N.current?.click(),className:"btn-secondary w-full flex items-center justify-center",children:[r.jsx(m,{className:"w-5 h-5 mr-2"})," Subir Foto de Perfil"]}),o.fotoPerfil&&(0,r.jsxs)("div",{className:"mt-2 relative w-24 h-24 rounded-full overflow-hidden mx-auto",children:[r.jsx(x.default,{src:h[0],alt:"Foto de Perfil",layout:"fill",objectFit:"cover"}),r.jsx("button",{type:"button",onClick:()=>k(0),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:r.jsx(u.Z,{className:"w-3 h-3"})})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"additional-photos",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fotos Adicionales (M\xe1x. 2)"}),r.jsx("input",{type:"file",id:"additional-photos",accept:"image/*",multiple:!0,onChange:e=>{let t=Array.from(e.target.files||[]);if(t.length>0){let e=t.slice(0,2-o.fotosAdicionales.length);l(t=>({...t,fotosAdicionales:[...t.fotosAdicionales,...e]})),e.forEach(e=>{let t=new FileReader;t.onload=e=>{let t=e.target?.result;f(e=>[...e,t])},t.readAsDataURL(e)})}},ref:w,className:"hidden"}),(0,r.jsxs)("button",{type:"button",onClick:()=>w.current?.click(),className:"btn-secondary w-full flex items-center justify-center",disabled:o.fotosAdicionales.length>=2,children:[r.jsx(m,{className:"w-5 h-5 mr-2"})," Subir Fotos Adicionales"]}),r.jsx("div",{className:"mt-2 flex space-x-2 justify-center",children:h.slice(1).map((e,t)=>(0,r.jsxs)("div",{className:"relative w-24 h-24 rounded-lg overflow-hidden",children:[r.jsx(x.default,{src:e,alt:`Foto adicional ${t+1}`,layout:"fill",objectFit:"cover"}),r.jsx("button",{type:"button",onClick:()=>k(t+1),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:r.jsx(u.Z,{className:"w-3 h-3"})})]},t))})]}),r.jsx("button",{type:"submit",disabled:t,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Registrando...":"Registrarse"})]})},f=()=>{let[e,t]=(0,i.useState)(!0),[s,d]=(0,i.useState)(!1),[u,m]=(0,i.useState)(""),p=(0,a.useRouter)(),x=e=>"object"==typeof e&&e&&"message"in e?String(e.message||""):"Error desconocido",f=async(e,t)=>{let s=(0,c.iH)(o.tO,t),r=await (0,c.KV)(s,e,{contentType:e.type||"image/jpeg"});return await (0,c.Jt)(r.ref)},b=async(e,t)=>{d(!0),m("");try{await (0,l.e5)(o.I8,e,t),p.push("/")}catch(e){m("Error al iniciar sesi\xf3n: "+x(e))}finally{d(!1)}},g=async e=>{d(!0),m("");try{let t=(await (0,l.Xb)(o.I8,e.email,e.password)).user,s="";e.fotoPerfil&&(s=await f(e.fotoPerfil,`users/${t.uid}/profile/profile.jpg`));let r=[];for(let s=0;s<e.fotosAdicionales.length;s++){let i=e.fotosAdicionales[s],a=await f(i,`users/${t.uid}/gallery/additional_${s}.jpg`);r.push(a)}await (0,n.pl)((0,n.JU)(o.db,"users",t.uid),{email:t.email,createdAt:(0,n.Bt)(),nombre:e.nombre,edad:e.edad,genero:e.genero,rolSexual:e.rolSexual||null,fotoPerfil:s,fotosAdicionales:r,ubicacion:e.ubicacion||{lat:0,lng:0},favoritos:[],bloqueados:[],lastOnline:(0,n.Bt)()}),await (0,n.pl)((0,n.JU)(o.db,"publicProfiles",t.uid),{displayName:e.nombre,age:e.edad,lastActive:(0,n.Bt)(),gender:e.genero,photoURL:s,location:e.ubicacion||{lat:0,lng:0}}),p.push("/")}catch(e){m("Error al registrarse: "+x(e))}finally{d(!1)}};return r.jsx("div",{className:"min-h-screen gradient-bg flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:r.jsx("span",{className:"text-accent-400",children:"Gliter"})}),r.jsx("p",{className:"text-primary-100",children:"Encuentra tu match perfecto"})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[r.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${e?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,"aria-pressed":e,children:"Iniciar Sesi\xf3n"}),r.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${e?"text-gray-600 hover:text-gray-900":"bg-white text-primary-600 shadow-sm"}`,"aria-pressed":!e,children:"Registrarse"})]})}),u&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",role:"alert",children:u}),r.jsx(h,{isLogin:e,loading:s,onLogin:b,onRegister:g})]}),r.jsx("div",{className:"text-center mt-6 text-primary-100 text-sm",children:"Al continuar, aceptas nuestros t\xe9rminos y condiciones"})]})})}},54339:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`C:\Users\Admin\Documents\app\src\app\auth\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,956,226,194],()=>s(68342));module.exports=r})();