(()=>{var e={};e.id=576,e.ids=[576],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},480:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(55584),s(32029),s(35866);var r=s(23191),a=s(88716),i=s(37922),o=s.n(i),n=s(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let c=["",{children:["chat",{children:["[chatId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,55584)),"C:\\Users\\Admin\\Documents\\app\\src\\app\\chat\\[chatId]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,32029)),"C:\\Users\\Admin\\Documents\\app\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\Admin\\Documents\\app\\src\\app\\chat\\[chatId]\\page.tsx"],u="/chat/[chatId]/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/chat/[chatId]/page",pathname:"/chat/[chatId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},28259:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},70581:()=>{},11783:(e,t,s)=>{Promise.resolve().then(s.bind(s,54377))},99899:(e,t,s)=>{"use strict";var r=s(56715);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,s,a,i,o){if(o!==r){var n=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw n.name="Invariant Violation",n}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return s.PropTypes=s,s}},78439:(e,t,s)=>{e.exports=s(99899)()},56715:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},54377:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(10326),a=s(17577),i=s(90445),o=s(35047),n=s(86333),l=s(76557);let c=(0,l.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),d=(0,l.Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),u=(0,l.Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),m=(0,l.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var p=s(46226),x=s(92613),h=s(1245),g=s(78439),f=s.n(g);let b=({message:e,isOwn:t,senderName:s})=>(new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),r.jsx("div",{className:`flex ${t?"justify-end":"justify-start"} mb-4`,children:(0,r.jsxs)("div",{className:`max-w-xs lg:max-w-md ${t?"order-2":"order-1"}`,children:[!t&&r.jsx("p",{className:"text-xs text-gray-500 mb-1 px-3",children:s}),(0,r.jsxs)("div",{className:`relative px-4 py-2 rounded-2xl ${t?"bg-primary-500 text-white rounded-br-md":"bg-gray-100 text-gray-900 rounded-bl-md"}`,children:["texto"===e.tipo?r.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.message}):(0,r.jsxs)("div",{className:"space-y-2",children:[e.urlFoto&&r.jsx("div",{className:"relative w-48 h-32 rounded-lg overflow-hidden",children:r.jsx(p.default,{src:e.urlFoto,alt:"Imagen enviada",fill:!0,className:"object-cover",onError:e=>{e.target.src=`data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="192" height="128" viewBox="0 0 192 128">
                          <rect width="192" height="128" fill="#f3f4f6"/>
                          <text x="96" y="70" text-anchor="middle" fill="#6b7280" font-size="14">
                            Imagen no disponible
                          </text>
                        </svg>`)}`}})}),e.message&&"Foto enviada"!==e.message&&r.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.message})]}),r.jsx("p",{className:`text-xs mt-1 ${t?"text-primary-100":"text-gray-500"}`,children:(e=>{try{return(0,x.Q)(e,{addSuffix:!0,locale:h.es})}catch{return"hace un momento"}})(e.timestamp)}),t&&r.jsx("div",{className:"flex items-center justify-end mt-1 space-x-1",children:(0,r.jsxs)("div",{className:"flex",children:[r.jsx("svg",{className:"w-3 h-3 text-primary-100",fill:"currentColor",viewBox:"0 0 20 20",role:"img","aria-hidden":"true",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),r.jsx("svg",{className:"w-3 h-3 text-primary-100 -ml-1",fill:"currentColor",viewBox:"0 0 20 20",role:"img","aria-hidden":"true",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})})]})]})}));b.propTypes={message:f().object.isRequired,isOwn:f().bool.isRequired,senderName:f().string.isRequired};let y=({currentUser:e,otherUser:t,chatId:s,onSendMessage:i,onClose:o})=>{let[n,l]=(0,a.useState)([]),[x,h]=(0,a.useState)(""),[g,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),j=(0,a.useRef)(null),w=(0,a.useRef)(null);(0,a.useEffect)(()=>{l([{id:"1",senderId:t.uid,message:`\xa1Hola! Me gusta tu perfil 😊`,tipo:"texto",timestamp:new Date(Date.now()-36e5)},{id:"2",senderId:e.uid,message:"\xa1Hola! Gracias, el tuyo tambi\xe9n est\xe1 genial",tipo:"texto",timestamp:new Date(Date.now()-35e5)},{id:"3",senderId:t.uid,message:"\xbfTe gustar\xeda conocernos mejor?",tipo:"texto",timestamp:new Date(Date.now()-34e5)}])},[e.uid,t.uid]);let N=()=>{j.current?.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{N()},[n]);let q=()=>{if(x.trim()){let t={id:Date.now().toString(),senderId:e.uid,message:x,tipo:"texto",timestamp:new Date};l(e=>[...e,t]),i(x,"texto"),h("")}};return(0,r.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:r.jsx(p.default,{src:t.fotoPerfil,alt:t.nombre,width:40,height:40,className:"object-cover",onError:e=>{e.target.src=`data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">
                      <rect width="40" height="40" fill="#a855f7"/>
                      <text x="20" y="25" text-anchor="middle" fill="white" font-size="16" font-weight="bold">
                        ${t.nombre.charAt(0).toUpperCase()}
                      </text>
                    </svg>`)}`}})}),r.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-400 border-2 border-white rounded-full"})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:t.nombre}),r.jsx("p",{className:"text-sm text-green-500",children:"En l\xednea"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(c,{className:"w-5 h-5 text-gray-600"})}),o&&r.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:"✕"})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[n.map(s=>r.jsx(b,{message:s,isOwn:s.senderId===e.uid,senderName:s.senderId===e.uid?e.nombre:t.nombre},s.id)),g&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-gray-500",children:[(0,r.jsxs)("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,r.jsxs)("span",{className:"text-sm",children:[t.nombre," est\xe1 escribiendo..."]})]}),r.jsx("div",{ref:j})]}),y&&r.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:["\uD83D\uDE0A","\uD83D\uDE02","❤️","\uD83D\uDC4D","\uD83D\uDD25","\uD83D\uDE0D","\uD83E\uDD70","\uD83D\uDE18"].map(e=>r.jsx("button",{onClick:()=>{h(t=>t+e),v(!1)},className:"p-2 hover:bg-gray-200 rounded-lg transition-colors text-xl",children:e},e))})}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[(0,r.jsxs)("div",{className:"flex items-end space-x-2",children:[r.jsx("div",{className:"flex-1 relative",children:r.jsx("textarea",{value:x,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),q())},placeholder:`Escribe un mensaje a ${t.nombre}...`,className:"w-full px-4 py-2 border border-gray-300 rounded-full resize-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent max-h-32",rows:1,style:{minHeight:"40px",height:"auto"},onInput:e=>{let t=e.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}})}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx("button",{onClick:()=>v(!y),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded-full transition-colors",title:"Emojis",children:r.jsx(d,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>w.current?.click(),className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-primary-50 rounded-full transition-colors",title:"Enviar foto",children:r.jsx(u,{className:"w-5 h-5"})}),r.jsx("button",{onClick:q,disabled:!x.trim(),className:"p-2 bg-primary-500 text-white rounded-full hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Enviar mensaje",children:r.jsx(m,{className:"w-5 h-5"})})]})]}),r.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:t=>{let s=t.target.files?.[0];if(s&&s.type.startsWith("image/")){let t={id:Date.now().toString(),senderId:e.uid,message:"Foto enviada",tipo:"foto",urlFoto:URL.createObjectURL(s),timestamp:new Date};l(e=>[...e,t]),i("Foto enviada","foto",s)}},className:"hidden"})]})]})},v=()=>{let[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)(!0),c=(0,o.useRouter)(),d=(0,o.useParams)().chatId,[u,m]=(0,a.useState)(null),[p,x]=(0,a.useState)(null);(0,a.useEffect)(()=>i.I8.onAuthStateChanged(e=>{t(e),l(!1),e||c.push("/auth")}),[c]),(0,a.useEffect)(()=>{if(e&&d){let t={uid:e.uid,nombre:"Tu Usuario",edad:25,genero:"Hombre",ubicacion:{lat:-34.6037,lng:-58.3816},rolSexual:"vers\xe1til",fotoPerfil:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",fotosAdicionales:[],favoritos:[],bloqueados:[],lastOnline:new Date,email:e.email||"tu@example.com"},s={chat1:{uid:"user1",nombre:"Ana Garc\xeda",edad:25,genero:"Mujer",ubicacion:{lat:-34.6037,lng:-58.3816},rolSexual:"vers\xe1til",fotoPerfil:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face",fotosAdicionales:[],favoritos:[],bloqueados:[],lastOnline:new Date,email:"ana@example.com"},chat2:{uid:"user2",nombre:"Carlos Mendez",edad:28,genero:"Hombre",ubicacion:{lat:-34.6037,lng:-58.3816},rolSexual:"activo",fotoPerfil:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",fotosAdicionales:[],favoritos:[],bloqueados:[],lastOnline:new Date(Date.now()-3e5),email:"carlos@example.com"},chat3:{uid:"user3",nombre:"Sofia Rodriguez",edad:23,genero:"Mujer",ubicacion:{lat:-34.6037,lng:-58.3816},rolSexual:"pasivo",fotoPerfil:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",fotosAdicionales:[],favoritos:[],bloqueados:[],lastOnline:new Date(Date.now()-36e5),email:"sofia@example.com"},default:{uid:"unknown-user",nombre:"Usuario Desconocido",edad:25,genero:"No especificado",ubicacion:{lat:-34.6037,lng:-58.3816},rolSexual:null,fotoPerfil:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?w=150&h=150&fit=crop&crop=face",fotosAdicionales:[],favoritos:[],bloqueados:[],lastOnline:new Date,email:"unknown@example.com"}};x(t),m(s[d]||s.default)}},[e,d]);let h=()=>{c.push("/chat")};return s?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-accent-500"})}):e&&p&&u?(0,r.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50",children:[r.jsx("div",{className:"lg:hidden bg-white shadow-sm border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center p-4",children:[r.jsx("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-full transition-colors mr-2",children:r.jsx(n.Z,{className:"w-5 h-5 text-gray-600"})}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:u.nombre})]})}),(0,r.jsxs)("div",{className:"flex-1 flex",children:[(0,r.jsxs)("div",{className:"hidden lg:block w-80 bg-white border-r border-gray-200",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:(0,r.jsxs)("button",{onClick:()=>c.push("/"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[r.jsx(n.Z,{className:"w-5 h-5"}),r.jsx("span",{children:"Volver al inicio"})]})}),(0,r.jsxs)("div",{className:"p-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mensajes"}),r.jsx("div",{className:"space-y-2",children:["chat1","chat2","chat3"].map(e=>{let t=e===d;return(0,r.jsxs)("button",{onClick:()=>c.push(`/chat/${e}`),className:`w-full text-left p-3 rounded-lg transition-colors ${t?"bg-primary-50 border border-primary-200":"hover:bg-gray-50"}`,children:[r.jsx("div",{className:"font-medium text-gray-900",children:{chat1:"Ana Garc\xeda",chat2:"Carlos Mendez",chat3:"Sofia Rodriguez"}[e]}),r.jsx("div",{className:"text-sm text-gray-500 truncate",children:"\xdaltimo mensaje..."})]},e)})})]})]}),r.jsx("div",{className:"flex-1 flex flex-col",children:r.jsx(y,{currentUser:p,otherUser:u,chatId:d,onSendMessage:(e,t,s)=>{console.log("Enviando mensaje:",{message:e,type:t,file:s})},onClose:h})})]})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Chat no encontrado"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"No se pudo cargar la conversaci\xf3n"}),r.jsx("button",{onClick:()=>c.push("/chat"),className:"btn-primary",children:"Volver a mensajes"})]})})}},90445:(e,t,s)=>{"use strict";s.d(t,{I8:()=>l,db:()=>c,tO:()=>d});var r=s(42585),a=s(46791),i=s(76),o=s(11552);let n=(0,r.C6)().length?(0,r.Mq)():(0,r.ZF)({apiKey:"AIzaSyBs4YagBaR9gXnFLE_tfHhWARpOZdo7m38",authDomain:"soygay-b9bc5.firebaseapp.com",projectId:"soygay-b9bc5",storageBucket:"soygay-b9bc5.appspot.com",messagingSenderId:"982386751624",appId:"1:982386751624:web:20a3ee764ec4c6f0da073d"}),l=(0,a.v0)(n),c=(0,i.ad)(n),d=(0,o.cF)(n)},55584:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`C:\Users\Admin\Documents\app\src\app\chat\[chatId]\page.tsx#default`)},32029:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>o});var r=s(19510),a=s(25384),i=s.n(a);s(5023);let o={title:"Gliter - Encuentra tu match perfecto",description:"App de dating con geolocalizaci\xf3n para encontrar personas cerca de ti"};function n({children:e}){return r.jsx("html",{lang:"es",children:r.jsx("body",{className:`${i().className} bg-primary-50 min-h-screen`,children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-500 to-primary-700",children:e})})})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[935,553,994,620],()=>s(480));module.exports=r})();