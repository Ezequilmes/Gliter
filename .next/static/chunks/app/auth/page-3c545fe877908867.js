(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{9663:function(e,t,a){Promise.resolve().then(a.bind(a,576))},3774:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});let i=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},576:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var i=a(7437),s=a(2265),l=a(9376),r=a(6410),o=a(3301),n=a(5978),c=a(62),d=a(3774),m=a(2489);let u=(0,a(9763).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),x=()=>{let[e,t]=(0,s.useState)(null),[a,i]=(0,s.useState)(!1),[l,r]=(0,s.useState)(null),o=()=>{if(i(!0),r(null),!navigator.geolocation){r("Geolocalizaci\xf3n no soportada por este navegador"),i(!1);return}navigator.geolocation.getCurrentPosition(e=>{let{latitude:a,longitude:s}=e.coords;t({lat:a,lng:s}),i(!1)},e=>{r("Error obteniendo ubicaci\xf3n: "+e.message),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})};return(0,s.useEffect)(()=>{o()},[]),{location:e,loading:a,error:l,refetch:o}};var h=a(3145),f=e=>{let{isLogin:t,loading:a,onLogin:l,onRegister:r}=e,[o,n]=(0,s.useState)({nombre:"",edad:18,genero:"",email:"",password:"",rolSexual:void 0,fotoPerfil:null,fotosAdicionales:[],ubicacion:void 0}),[c,f]=(0,s.useState)({email:"",password:""}),[p,b]=(0,s.useState)([]),[g,j]=(0,s.useState)(!1),{location:v,loading:y,error:N}=x(),w=(0,s.useRef)(null),k=(0,s.useRef)(null),S=e=>{let{name:a,value:i,type:s}=e.target,l="number"===s?parseInt(i):i;t?f(e=>({...e,[a]:l})):n(e=>({...e,[a]:l}))},F=e=>{if(0===e)n(e=>({...e,fotoPerfil:null}));else{let t=[...o.fotosAdicionales];t.splice(e-1,1),n(e=>({...e,fotosAdicionales:t}))}let t=[...p];t.splice(e,1),b(t)},C=e=>{if(e.preventDefault(),t)l(c.email,c.password);else{if(!o.fotoPerfil){alert("La foto de perfil es obligatoria");return}r(o)}};return t?(0,i.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"email-login",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,i.jsx)("input",{type:"email",id:"email-login",name:"email",value:c.email,onChange:S,className:"input-field",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"password-login",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),(0,i.jsx)("input",{type:"password",id:"password-login",name:"password",value:c.password,onChange:S,className:"input-field",required:!0})]}),(0,i.jsx)("button",{type:"submit",disabled:a,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]}):(0,i.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre"}),(0,i.jsx)("input",{type:"text",id:"nombre",name:"nombre",value:o.nombre,onChange:S,className:"input-field",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"edad",className:"block text-sm font-medium text-gray-700 mb-1",children:"Edad"}),(0,i.jsx)("input",{type:"number",id:"edad",name:"edad",value:o.edad,onChange:S,min:"18",max:"100",className:"input-field",required:!0})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"genero",className:"block text-sm font-medium text-gray-700 mb-1",children:"G\xe9nero"}),(0,i.jsxs)("select",{id:"genero",name:"genero",value:o.genero,onChange:S,className:"input-field",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Selecciona tu g\xe9nero"}),(0,i.jsx)("option",{value:"Hombre",children:"Hombre"}),(0,i.jsx)("option",{value:"Mujer",children:"Mujer"}),(0,i.jsx)("option",{value:"No binario",children:"No binario"}),(0,i.jsx)("option",{value:"Otro",children:"Otro"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"rolSexual",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol Sexual (Opcional)"}),(0,i.jsxs)("select",{id:"rolSexual",name:"rolSexual",value:o.rolSexual||"",onChange:S,className:"input-field",children:[(0,i.jsx)("option",{value:"",children:"No especificar"}),(0,i.jsx)("option",{value:"activo",children:"Activo"}),(0,i.jsx)("option",{value:"pasivo",children:"Pasivo"}),(0,i.jsx)("option",{value:"vers\xe1til",children:"Vers\xe1til"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"email-register",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,i.jsx)("input",{type:"email",id:"email-register",name:"email",value:o.email,onChange:S,className:"input-field",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"password-register",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contrase\xf1a"}),(0,i.jsx)("input",{type:"password",id:"password-register",name:"password",value:o.password,onChange:S,className:"input-field",required:!0})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("input",{type:"checkbox",id:"useLocation",checked:g,onChange:()=>{j(!g),!g&&v?n(e=>({...e,ubicacion:v})):n(e=>({...e,ubicacion:void 0}))},className:"form-checkbox h-4 w-4 text-primary-600 transition duration-150 ease-in-out"}),(0,i.jsx)("label",{htmlFor:"useLocation",className:"text-sm font-medium text-gray-700",children:"Usar mi ubicaci\xf3n actual"})]}),g&&y&&(0,i.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[(0,i.jsx)(d.Z,{className:"w-4 h-4 mr-1"})," Obteniendo ubicaci\xf3n..."]}),g&&N&&(0,i.jsxs)("p",{className:"text-sm text-red-500 flex items-center",children:[(0,i.jsx)(m.Z,{className:"w-4 h-4 mr-1"})," Error al obtener ubicaci\xf3n: ",N]}),g&&v&&(0,i.jsxs)("p",{className:"text-sm text-green-600 flex items-center",children:[(0,i.jsx)(d.Z,{className:"w-4 h-4 mr-1"})," Ubicaci\xf3n obtenida: ",v.lat.toFixed(2),", ",v.lng.toFixed(2)]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"profile-photo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Foto de Perfil (Obligatoria)"}),(0,i.jsx)("input",{type:"file",id:"profile-photo",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){n(e=>({...e,fotoPerfil:a}));let e=new FileReader;e.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;b(e=>[a,...e.slice(1)])},e.readAsDataURL(a)}},ref:w,className:"hidden"}),(0,i.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},className:"btn-secondary w-full flex items-center justify-center",children:[(0,i.jsx)(u,{className:"w-5 h-5 mr-2"})," Subir Foto de Perfil"]}),o.fotoPerfil&&(0,i.jsxs)("div",{className:"mt-2 relative w-24 h-24 rounded-full overflow-hidden mx-auto",children:[(0,i.jsx)(h.default,{src:p[0],alt:"Foto de Perfil",layout:"fill",objectFit:"cover"}),(0,i.jsx)("button",{type:"button",onClick:()=>F(0),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:(0,i.jsx)(m.Z,{className:"w-3 h-3"})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"additional-photos",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fotos Adicionales (M\xe1x. 2)"}),(0,i.jsx)("input",{type:"file",id:"additional-photos",accept:"image/*",multiple:!0,onChange:e=>{let t=Array.from(e.target.files||[]);if(t.length>0){let e=t.slice(0,2-o.fotosAdicionales.length);n(t=>({...t,fotosAdicionales:[...t.fotosAdicionales,...e]})),e.forEach(e=>{let t=new FileReader;t.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;b(e=>[...e,a])},t.readAsDataURL(e)})}},ref:k,className:"hidden"}),(0,i.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.click()},className:"btn-secondary w-full flex items-center justify-center",disabled:o.fotosAdicionales.length>=2,children:[(0,i.jsx)(u,{className:"w-5 h-5 mr-2"})," Subir Fotos Adicionales"]}),(0,i.jsx)("div",{className:"mt-2 flex space-x-2 justify-center",children:p.slice(1).map((e,t)=>(0,i.jsxs)("div",{className:"relative w-24 h-24 rounded-lg overflow-hidden",children:[(0,i.jsx)(h.default,{src:e,alt:"Foto adicional ".concat(t+1),layout:"fill",objectFit:"cover"}),(0,i.jsx)("button",{type:"button",onClick:()=>F(t+1),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full p-1",children:(0,i.jsx)(m.Z,{className:"w-3 h-3"})})]},t))})]}),(0,i.jsx)("button",{type:"submit",disabled:a,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Registrando...":"Registrarse"})]})},p=()=>{let[e,t]=(0,s.useState)(!0),[a,d]=(0,s.useState)(!1),[m,u]=(0,s.useState)(""),x=(0,l.useRouter)(),h=async(e,t)=>{let a=(0,c.iH)(r.tO,t),i=await (0,c.KV)(a,e);return await (0,c.Jt)(i.ref)},p=async(e,t)=>{d(!0),u("");try{await (0,o.e5)(r.I8,e,t),x.push("/")}catch(e){u("Error al iniciar sesi\xf3n: "+e.message)}finally{d(!1)}},b=async e=>{d(!0),u("");try{let t=(await (0,o.Xb)(r.I8,e.email,e.password)).user,a="";e.fotoPerfil&&(a=await h(e.fotoPerfil,"users/".concat(t.uid,"/profile.jpg")));let i=[];for(let a=0;a<e.fotosAdicionales.length;a++){let s=e.fotosAdicionales[a],l=await h(s,"users/".concat(t.uid,"/additional_").concat(a,".jpg"));i.push(l)}await (0,n.pl)((0,n.JU)(r.db,"users",t.uid),{nombre:e.nombre,edad:e.edad,genero:e.genero,email:e.email,rolSexual:e.rolSexual||null,fotoPerfil:a,fotosAdicionales:i,ubicacion:e.ubicacion||{lat:0,lng:0},favoritos:[],bloqueados:[],lastOnline:new Date}),x.push("/")}catch(e){u("Error al registrarse: "+e.message)}finally{d(!1)}};return(0,i.jsx)("div",{className:"min-h-screen gradient-bg flex items-center justify-center p-4",children:(0,i.jsxs)("div",{className:"w-full max-w-md",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:(0,i.jsx)("span",{className:"text-accent-400",children:"Gliter"})}),(0,i.jsx)("p",{className:"text-primary-100",children:"Encuentra tu match perfecto"})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsxs)("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[(0,i.jsx)("button",{onClick:()=>t(!0),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat(e?"bg-white text-primary-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Iniciar Sesi\xf3n"}),(0,i.jsx)("button",{onClick:()=>t(!1),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat(e?"text-gray-600 hover:text-gray-900":"bg-white text-primary-600 shadow-sm"),children:"Registrarse"})]})}),m&&(0,i.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:m}),(0,i.jsx)(f,{isLogin:e,loading:a,onLogin:p,onRegister:b})]}),(0,i.jsx)("div",{className:"text-center mt-6 text-primary-100 text-sm",children:"Al continuar, aceptas nuestros t\xe9rminos y condiciones"})]})})}},6410:function(e,t,a){"use strict";a.d(t,{I8:function(){return n},db:function(){return c},tO:function(){return d}});var i=a(738),s=a(3301),l=a(5978),r=a(62);let o=(0,i.C6)().length?(0,i.Mq)():(0,i.ZF)({apiKey:"AIzaSyBs4YagBaR9gXnFLE_tfHhWARpOZdo7m38",authDomain:"soygay-b9bc5.firebaseapp.com",projectId:"soygay-b9bc5",storageBucket:"soygay-b9bc5.appspot.com",messagingSenderId:"982386751624",appId:"1:982386751624:web:20a3ee764ec4c6f0da073d"}),n=(0,s.v0)(o),c=(0,l.ad)(o),d=(0,r.cF)(o)}},function(e){e.O(0,[358,139,847,492,971,117,744],function(){return e(e.s=9663)}),_N_E=e.O()}]);