(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{9919:function(e,a,t){Promise.resolve().then(t.bind(t,3898))},2718:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},3247:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3898:function(e,a,t){"use strict";var s=t(7437),r=t(2265),n=t(6410),o=t(9376),i=t(2660),l=t(3247),c=t(2718),d=t(3145),u=t(4747),m=t(7240);a.default=()=>{let[e,a]=(0,r.useState)(null),[t,h]=(0,r.useState)(!0),x=(0,o.useRouter)(),[p,f]=(0,r.useState)([]),[b,g]=(0,r.useState)(""),[v,w]=(0,r.useState)({});(0,r.useEffect)(()=>n.I8.onAuthStateChanged(e=>{a(e),h(!1),e||x.push("/auth")}),[x]),(0,r.useEffect)(()=>{if(e){let a={user1:{uid:"user1",nombre:"Ana Garc\xeda",edad:25,genero:"Mujer",ubicacion:{lat:-34.6037,lng:-58.3816},rolSexual:"vers\xe1til",fotoPerfil:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=150&h=150&fit=crop&crop=face",fotosAdicionales:[],favoritos:[],bloqueados:[],lastOnline:new Date,email:"ana@example.com"},user2:{uid:"user2",nombre:"Carlos Mendez",edad:28,genero:"Hombre",ubicacion:{lat:-34.6037,lng:-58.3816},rolSexual:"activo",fotoPerfil:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face",fotosAdicionales:[],favoritos:[],bloqueados:[],lastOnline:new Date(Date.now()-3e5),email:"carlos@example.com"},user3:{uid:"user3",nombre:"Sofia Rodriguez",edad:23,genero:"Mujer",ubicacion:{lat:-34.6037,lng:-58.3816},rolSexual:"pasivo",fotoPerfil:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",fotosAdicionales:[],favoritos:[],bloqueados:[],lastOnline:new Date(Date.now()-36e5),email:"sofia@example.com"}},t=[{id:"chat1",participants:[e.uid,"user1"],lastMessage:"\xa1Hola! \xbfC\xf3mo est\xe1s? \uD83D\uDE0A",lastTimestamp:new Date(Date.now()-3e5)},{id:"chat2",participants:[e.uid,"user2"],lastMessage:"Me encantar\xeda conocerte mejor",lastTimestamp:new Date(Date.now()-18e5)},{id:"chat3",participants:[e.uid,"user3"],lastMessage:"Gracias por el match! \uD83D\uDC95",lastTimestamp:new Date(Date.now()-72e5)}];w(a),f(t)}},[e]);let j=a=>a.participants.find(a=>a!==(null==e?void 0:e.uid))||"",y=e=>v[j(e)],N=e=>(new Date().getTime()-e.getTime())/6e4<5,D=e=>{try{return(0,u.Q)(e,{addSuffix:!0,locale:m.es})}catch(e){return"hace un momento"}},S=p.filter(e=>{let a=y(e);return null==a?void 0:a.nombre.toLowerCase().includes(b.toLowerCase())});return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-accent-500"})}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>x.push("/"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(i.Z,{className:"w-5 h-5 text-gray-600"})}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Mensajes"})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)("span",{className:"bg-accent-500 text-white text-xs px-2 py-1 rounded-full",children:p.length})})]})})}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:"Buscar conversaciones...",value:b,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white"})]})}),(0,s.jsx)("div",{className:"space-y-2",children:0===S.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(c.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:b?"No se encontraron conversaciones":"No tienes conversaciones a\xfan"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:b?"Intenta con otro t\xe9rmino de b\xfasqueda":"Comienza a hacer match con personas para iniciar conversaciones"}),!b&&(0,s.jsx)("button",{onClick:()=>x.push("/"),className:"btn-primary",children:"Explorar personas"})]}):S.map(e=>{let a=y(e);return a?(0,s.jsx)("div",{onClick:()=>x.push("/chat/".concat(e.id)),className:"bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer border border-gray-100 hover:border-primary-200",children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-14 h-14 rounded-full overflow-hidden",children:(0,s.jsx)(d.default,{src:a.fotoPerfil,alt:a.nombre,width:56,height:56,className:"object-cover",onError:e=>{e.target.src="data:image/svg+xml;base64,".concat(btoa('<svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" viewBox="0 0 56 56">\n                                <rect width="56" height="56" fill="#a855f7"/>\n                                <text x="28" y="35" text-anchor="middle" fill="white" font-size="20" font-weight="bold">\n                                  '.concat(a.nombre.charAt(0).toUpperCase(),"\n                                </text>\n                              </svg>")))}})}),(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 border-2 border-white rounded-full ".concat(N(a.lastOnline)?"bg-green-400":"bg-gray-400")})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 truncate",children:a.nombre}),(0,s.jsx)("span",{className:"text-xs text-gray-500 flex-shrink-0",children:D(e.lastTimestamp)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 truncate flex-1",children:e.lastMessage}),Math.random()>.7&&(0,s.jsx)("span",{className:"bg-accent-500 text-white text-xs px-2 py-1 rounded-full ml-2 flex-shrink-0",children:Math.floor(5*Math.random())+1})]}),a.rolSexual&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat("activo"===a.rolSexual?"bg-blue-100 text-blue-800":"pasivo"===a.rolSexual?"bg-pink-100 text-pink-800":"bg-purple-100 text-purple-800")})})]})]})},e.id):null})})]})]}):null}},6410:function(e,a,t){"use strict";t.d(a,{I8:function(){return l},db:function(){return c},tO:function(){return d}});var s=t(738),r=t(3301),n=t(5978),o=t(62);let i=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)({apiKey:"AIzaSyBs4YagBaR9gXnFLE_tfHhWARpOZdo7m38",authDomain:"soygay-b9bc5.firebaseapp.com",projectId:"soygay-b9bc5",storageBucket:"soygay-b9bc5.appspot.com",messagingSenderId:"982386751624",appId:"1:982386751624:web:20a3ee764ec4c6f0da073d"}),l=(0,r.v0)(i),c=(0,n.ad)(i),d=(0,o.cF)(i)}},function(e){e.O(0,[358,139,847,492,361,971,117,744],function(){return e(e.s=9919)}),_N_E=e.O()}]);